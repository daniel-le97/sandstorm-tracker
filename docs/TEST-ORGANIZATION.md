# Test Organization

All tests are now properly organized in the `/tests` directory with each test file containing a single exported function that `test-runner.ts` calls.

## Test Structure

### `/tests` Directory

```
tests/
â”œâ”€â”€ tests.ts               # Event parsing tests (25 test cases)
â”œâ”€â”€ weapon-test.ts          # Weapon name mapping tests
â”œâ”€â”€ database-tests.ts       # Database functionality tests
â”œâ”€â”€ command-tests.ts        # Chat command response tests
â”œâ”€â”€ watcher-tests.ts        # File watcher functionality tests
â””â”€â”€ integration-tests.ts    # End-to-end integration tests
```

### Test Runner

- **`test-runner.ts`** - Main test orchestrator that calls all test functions

## Test Functions

Each test file exports a single function:

- `runTests()` - Comprehensive event parsing (25 tests)
- `runWeaponTests()` - Weapon name mapping verification
- `runDatabaseTests()` - SQLite database operations
- `runCommandTests()` - Chat command responses (!stats, !kdr, !top, !guns)
- `runWatcherTests()` - File monitoring functionality
- `runIntegrationTests()` - Complete end-to-end system test

## Running Tests

### Run All Tests

```bash
bun test-runner.ts
```

### Run Individual Test Suites

```bash
# Import and run specific tests
import { runTests } from './tests/tests';
runTests();
```

## Test Coverage

âœ… **Event Parsing** (25 tests)

- Player joins/leaves/disconnects
- Kills, team kills, suicides
- Round events, map changes
- Chat commands with various formats
- Invalid/edge cases

âœ… **Database Operations**

- Table creation and initialization
- Player session tracking
- Kill/death recording
- Statistics retrieval
- Chat command logging

âœ… **Chat Commands**

- `!stats` - Personal statistics
- `!kdr` - Kill/death ratio
- `!top` - Leaderboard
- `!guns` - Weapon statistics

âœ… **File Watching**

- File modification detection
- Change handling
- Setup verification

âœ… **Integration**

- Complete log processing pipeline
- Database integration
- Real-time event handling
- Command response system

## Test Results Summary

```
Test Suites Passed: 6/6
ðŸŽ‰ ALL TESTS PASSED! ðŸŽ‰
```

All tests pass successfully, ensuring the entire statistics tracking system works correctly from log parsing to database storage to chat command responses.
