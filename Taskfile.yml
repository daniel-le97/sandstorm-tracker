version: "3"
tasks:
  goreleaser-dev:
    desc: Run goreleaser in snapshot (dev) mode
    cmds:
      - goreleaser release --snapshot --clean
  goreleaser-release:
    desc: Run goreleaser for a full release
    cmds:
      - goreleaser release --clean
  build:
    desc: Build all Go binaries
    cmds:
      - go build ./...\
  dev:
    desc: run app with defaults (db sandstorm-tracker.db, port 8080, server hc)
    cmds:
      - go run main.go -paths="C:\Users\danie\code\sandstorm-admin-wrapper\sandstorm-server\Insurgency\Saved\Logs"
  web:
    desc: Run the web server (default db, port 8080)
    cmds:
      - go run ./cmd/web -db=sandstorm-tracker.db -port=8080 -server=hc
  test:
    desc: Run all Go tests
    cmds:
      - go test ./...
  sqlc:
    desc: Generate Go code from SQL queries
    dir: internal/db
    cmds:
      - sqlc generate
  fmt:
    desc: Run gofmt on all Go files
    cmds:
      - gofmt -w .
  clean:
    desc: Remove built binaries
    cmds:
      - go clean