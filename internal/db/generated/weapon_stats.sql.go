// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: weapon_stats.sql

package db

import (
	"context"
)

const deleteWeaponStats = `-- name: DeleteWeaponStats :exec
DELETE FROM weapon_stats WHERE player_stats_id = ? AND weapon_name = ?
`

type DeleteWeaponStatsParams struct {
	PlayerStatsID string
	WeaponName    string
}

func (q *Queries) DeleteWeaponStats(ctx context.Context, arg DeleteWeaponStatsParams) error {
	_, err := q.db.ExecContext(ctx, deleteWeaponStats, arg.PlayerStatsID, arg.WeaponName)
	return err
}

const getWeaponStatsForPlayerStats = `-- name: GetWeaponStatsForPlayerStats :many
SELECT player_stats_id, weapon_name, kills, assists FROM weapon_stats WHERE player_stats_id = ?
`

func (q *Queries) GetWeaponStatsForPlayerStats(ctx context.Context, playerStatsID string) ([]WeaponStat, error) {
	rows, err := q.db.QueryContext(ctx, getWeaponStatsForPlayerStats, playerStatsID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WeaponStat
	for rows.Next() {
		var i WeaponStat
		if err := rows.Scan(
			&i.PlayerStatsID,
			&i.WeaponName,
			&i.Kills,
			&i.Assists,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const upsertWeaponStats = `-- name: UpsertWeaponStats :one
INSERT INTO weapon_stats (player_stats_id, weapon_name, kills, assists)
VALUES (?, ?, ?, ?)
ON CONFLICT(player_stats_id, weapon_name) DO UPDATE SET
    kills = excluded.kills,
    assists = excluded.assists
RETURNING player_stats_id, weapon_name, kills, assists
`

type UpsertWeaponStatsParams struct {
	PlayerStatsID string
	WeaponName    string
	Kills         *int64
	Assists       *int64
}

func (q *Queries) UpsertWeaponStats(ctx context.Context, arg UpsertWeaponStatsParams) (WeaponStat, error) {
	row := q.db.QueryRowContext(ctx, upsertWeaponStats,
		arg.PlayerStatsID,
		arg.WeaponName,
		arg.Kills,
		arg.Assists,
	)
	var i WeaponStat
	err := row.Scan(
		&i.PlayerStatsID,
		&i.WeaponName,
		&i.Kills,
		&i.Assists,
	)
	return i, err
}
